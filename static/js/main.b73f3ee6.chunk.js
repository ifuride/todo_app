(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var o,c=n(0),r=n(16),a=n(10),i=n(8),l=n(6),s=n(2),u=n.n(s),d=n(4),f=n(3),p=n(1),j=function(t){var e=t.title,n=t.setTitle,o=t.onSaveNewTodo,c=function(t){t.preventDefault(),o()};return Object(p.jsx)("header",{className:"todoapp__header",children:Object(p.jsx)("form",{action:"",onSubmit:c,onBlur:c,children:Object(p.jsx)("input",{type:"text",name:"newTodoTitle","data-cy":"createTodo",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:e,onChange:function(t){n(t.target.value)}})})})},b=function(t){var e=t.todos.filter((function(t){return!t.completed})).length;return Object(p.jsx)("span",{className:"todoapp__todo-count","data-cy":"todosCounter",children:"".concat(e," items left")})},m=n(9),h=n.n(m);!function(t){t.ALL="all",t.ACTIVE="active",t.COMPLETED="completed"}(o||(o={}));var O=function(t){var e=t.filterBy,n=t.onChangeFilter;return Object(p.jsxs)("nav",{className:"filters","data-cy":"todosFilter",children:[Object(p.jsx)(a.b,{to:"/",className:h()("filters__link",{selected:e===o.ALL}),onClick:function(){n(o.ALL)},children:"All"}),Object(p.jsx)(a.b,{to:"/active",className:h()("filters__link",{selected:e===o.ACTIVE}),onClick:function(){n(o.ACTIVE)},children:"Active"}),Object(p.jsx)(a.b,{to:"/completed",className:h()("filters__link",{selected:e===o.COMPLETED}),onClick:function(){n(o.COMPLETED)},children:"Completed"})]})},v=function(t){var e=t.todos,n=t.onDeleteCompletedTodos,o=e.filter((function(t){return t.completed})).length;return Object(p.jsx)("button",Object(i.a)(Object(i.a)({type:"button",className:"todoapp__clear-completed"},o?{onClick:n}:{disabled:!0}),{},{style:{opacity:o?1:0,cursor:o?"pointer":"auto"},children:"Clear completed"}))},x=function(t){var e=t.todos,n=t.filterBy,o=t.onChangeFilter,c=t.onDeleteCompletedTodos;return Object(p.jsxs)("footer",{className:"todoapp__footer",children:[Object(p.jsx)(b,{todos:e}),Object(p.jsx)(O,{filterBy:n,onChangeFilter:o}),Object(p.jsx)(v,{todos:e,onDeleteCompletedTodos:c})]})},_=function(t){var e=t.todo,n=t.onUpdateTodo,o=t.onDeleteTodo,r=e.id,a=e.title,i=e.completed,l=Object(c.useState)(!1),s=Object(f.a)(l,2),u=s[0],d=s[1],j=Object(c.useState)(a),b=Object(f.a)(j,2),m=b[0],O=b[1],v=Object(c.useState)(null),x=Object(f.a)(v,2),_=x[0],g=x[1],T=Object(c.useRef)(null);Object(c.useEffect)((function(){T.current&&T.current.focus()}),[u]);var y=function(){return m.trim()?m.trim()===a?(O(a.trim()),void d(!1)):(n(r,{title:m.trim()}),void d(!1)):(o(r),void d(!1))};return Object(p.jsx)("li",{className:h()("todolist__item",{"todolist__item--completed":i},{"todolist__item--editing":u}),children:Object(p.jsx)("div",{className:"todolist__view-item",onDoubleClick:function(){d(!0)},onTouchStart:function(t){1===t.touches.length&&(_&&t.timeStamp<=_?(d(!0),g(null)):g(t.timeStamp+400))},children:u?Object(p.jsx)("form",{onSubmit:y,children:Object(p.jsx)("input",{type:"text",name:"editTodoTitle",className:"todolist__edit-field",value:m,onChange:function(t){O(t.target.value)},onBlur:y,onKeyDown:function(t){"Escape"===t.key&&d(!1)},ref:T})}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"checkbox",name:"toggleTodoStatus",className:"todolist__toggle-item",onChange:function(){n(r,{completed:!i})},checked:i}),Object(p.jsx)("label",{children:a}),Object(p.jsx)("button",{type:"button",className:"todolist__destroy-item","aria-label":"Delete todo item","data-cy":"deleteTodo",onClick:function(){o(r)}})]})})})},g=function(t){var e=t.todos,n=t.onUpdateTodo,o=t.onDeleteTodo;return Object(p.jsx)("ul",{className:"todolist","data-cy":"todosList",children:e.map((function(t){return Object(p.jsx)(_,{todo:t,onUpdateTodo:n,onDeleteTodo:o},t.id)}))})},T="https://mate.academy/students-api";function y(t){return new Promise((function(e){setTimeout(e,t)}))}function C(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:e};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),y(300).then((function(){return fetch(T+t,o)})).then((function(t){if(!t.ok)throw new Error;return t.json()}))}var k=function(t){return C(t)},N=function(t,e){return C(t,"POST",e)},E=function(t,e){return C(t,"PATCH",e)},w=function(t){return C(t,"DELETE")},S=function(t,e){return E("/todos/".concat(t),e)},D=function(t){return w("/todos/".concat(t))},L=function(){var t=Object(c.useState)([]),e=Object(f.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(""),s=Object(f.a)(a,2),b=s[0],m=s[1],h=Object(c.useState)(o.ALL),O=Object(f.a)(h,2),v=O[0],_=O[1],T=Object(c.useState)(""),y=Object(f.a)(T,2),C=y[0],E=y[1],w=function(){setTimeout((function(){E("")}),3e3)};Object(c.useEffect)((function(){var t=localStorage.getItem("todos");t&&r(JSON.parse(t))}),[]),Object(c.useEffect)((function(){localStorage.setItem("todos",JSON.stringify(n))}),[n]);var L=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k("/todos?userId=".concat(7033));case 3:e=t.sent,r(e),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),E(t.t0.message),w();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){L()}),[]);var A=function(t,e){var n=t;return e!==o.ALL&&(n=t.filter((function(t){var n=t.completed;switch(e){case o.ACTIVE:return!n;case o.COMPLETED:return n;default:throw new Error("Unable to filter")}}))),n}(n,v),U=function(){var t=Object(d.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!b.trim()){t.next=7;break}return e={id:0,completed:!1,userId:7033,title:b.trim()},t.next=5,N("/todos/",e);case 5:n=t.sent,r((function(t){return[].concat(Object(l.a)(t),[n])}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),E("Unable to add a todo"),w();case 13:return t.prev=13,m(""),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r((function(t){return t.map((function(t){return t.id===e?Object(i.a)(Object(i.a)({},t),n):t}))})),t.next=4,S(e,n);case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),E("Unable to update a todo"),w();case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),I=n.every((function(t){return t.completed})),B=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{I?n.forEach((function(t){return F(t.id,{completed:!1})})):n.filter((function(t){return!t.completed})).forEach((function(t){return F(t.id,{completed:!0})}))}catch(e){E("Unable to update a todo"),w()}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D(e);case 3:r((function(t){return t.filter((function(t){return t.id!==e}))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),E("Unable to delete a todo"),w();case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"todoapp",children:[Object(p.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(p.jsxs)("div",{className:"todoapp__content",children:[Object(p.jsx)(j,{title:b,setTitle:m,onSaveNewTodo:U}),Object(p.jsx)("section",{className:"todoapp__main",children:n.length>0&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("input",{type:"checkbox",name:"toggleAll",id:"todoapp__toggle-all",className:"todoapp__toggle-all","data-cy":"toggleAll",onClick:B}),Object(p.jsx)("label",{className:"todoapp__toggle-all-label",htmlFor:"todoapp__toggle-all",children:"Mark all as complete"}),Object(p.jsx)(g,{todos:A,onUpdateTodo:F,onDeleteTodo:P})]})}),n.length>0&&Object(p.jsx)(x,{todos:n,filterBy:v,onChangeFilter:_,onDeleteCompletedTodos:function(){n.filter((function(t){return t.completed})).map((function(t){return t.id})).map((function(t){return D(t)})),r((function(t){return t.filter((function(t){return!t.completed}))}))}})]}),Object(p.jsxs)("div",{className:"error",hidden:!C,children:[Object(p.jsx)("button",{type:"button",className:"error__delete","aria-label":"Delete error-button",onClick:function(){E("")}}),C]})]})};n(27);Object(r.createRoot)(document.getElementById("root")).render(Object(p.jsx)(a.a,{children:Object(p.jsx)(L,{})}))}},[[28,1,2]]]);
//# sourceMappingURL=main.b73f3ee6.chunk.js.map