{"version":3,"sources":["types/Status.ts","components/Header/Header.tsx","components/TodoCount/TodoCount.tsx","components/TodosFilter/TodosFilter.tsx","components/DeleteCompletedButton/DeleteCompletedButton.tsx","components/Footer/Footer.tsx","components/TodoItem/TodoItem.tsx","components/TodoList/TodoList.tsx","utils/fetchClient.ts","api/todos.ts","api/user.ts","App.tsx","helpers/getVisibleTodos.tsx","index.tsx"],"names":["Status","Header","title","setTitle","onSaveNewTodo","handleSubmit","event","preventDefault","className","action","onSubmit","onBlur","type","name","data-cy","placeholder","value","onChange","target","TodoCount","activeTodosQty","todos","filter","todo","completed","length","TodosFilter","filterBy","onChangeFilter","to","classNames","selected","ALL","onClick","ACTIVE","COMPLETED","DeleteCompletedButton","onDeleteCompletedTodos","completedTodos","disabled","style","opacity","cursor","Footer","TodoItem","onUpdateTodo","onDeleteTodo","id","useState","isInEditMode","setIsInEditMode","newTitle","setNewTitle","expired","setExpired","inputRef","useRef","useEffect","current","focus","handleTitleUpdate","trim","onDoubleClick","onTouchStart","touches","timeStamp","onKeyDown","key","ref","checked","htmlFor","aria-label","TodoList","map","BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","data","options","body","JSON","stringify","headers","then","fetch","response","ok","Error","json","client","updateTodo","todoId","deleteTodo","USER_ID","App","setTodos","user","setUser","setFilterBy","errorMessage","setErrorMessage","clearError","loadedTodos","localStorage","getItem","parse","setItem","getUserName","a","loadedUser","loadTodos","todosFromServer","message","visibleTodos","currentFilter","getVisibleTodos","handleAddNewTodo","newTodo","userId","addedTodo","prevTodos","handleUpdateTodo","parameterToUpdate","isAllCompleted","every","handleToggleAll","forEach","handleRemoveTodo","hidden","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.19d58529.chunk.js","sourcesContent":["export enum Status {\n  ALL = 'all',\n  ACTIVE = 'active',\n  COMPLETED = 'completed',\n}\n","import React from 'react';\n\ntype Props = {\n  title: string,\n  setTitle: (newTitle: string) => void,\n  onSaveNewTodo: () => void,\n};\n\nexport const Header: React.FC<Props> = ({\n  title,\n  setTitle,\n  onSaveNewTodo,\n}) => {\n  const handleTitle = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setTitle(event.target.value);\n  };\n\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n\n    onSaveNewTodo();\n  };\n\n  return (\n    <header className=\"todoapp__header\">\n\n      <form\n        action=\"\"\n        onSubmit={handleSubmit}\n        onBlur={handleSubmit}\n      >\n        <input\n          type=\"text\"\n          name=\"newTodoTitle\"\n          data-cy=\"createTodo\"\n          className=\"todoapp__new-todo\"\n          placeholder=\"What needs to be done?\"\n          value={title}\n          onChange={handleTitle}\n        />\n      </form>\n    </header>\n  );\n};\n","import React from 'react';\nimport { Todo } from '../../types/Todo';\n\ntype Props = {\n  todos: Todo[],\n};\n\nexport const TodoCount: React.FC<Props> = ({ todos }) => {\n  const activeTodosQty = todos.filter(todo => !todo.completed).length;\n\n  return (\n    <span className=\"todoapp__todo-count\" data-cy=\"todosCounter\">\n      {`${activeTodosQty} items left`}\n    </span>\n  );\n};\n","import React from 'react';\nimport classNames from 'classnames';\nimport { NavLink } from 'react-router-dom';\nimport { Status } from '../../types/Status';\n\ntype Props = {\n  filterBy: Status,\n  onChangeFilter: (filterBy: Status) => void,\n};\n\nexport const TodosFilter: React.FC<Props> = ({\n  filterBy,\n  onChangeFilter,\n}) => {\n  const handleShowAll = () => {\n    onChangeFilter(Status.ALL);\n  };\n\n  const handleShowActive = () => {\n    onChangeFilter(Status.ACTIVE);\n  };\n\n  const handleShowCompleted = () => {\n    onChangeFilter(Status.COMPLETED);\n  };\n\n  return (\n    <nav className=\"filters\" data-cy=\"todosFilter\">\n      <NavLink\n        to=\"/\"\n        className={classNames('filters__link', {\n          selected: filterBy === Status.ALL,\n        })}\n        onClick={handleShowAll}\n      >\n        All\n      </NavLink>\n\n      <NavLink\n        to=\"/active\"\n        className={classNames('filters__link', {\n          selected: filterBy === Status.ACTIVE,\n        })}\n        onClick={handleShowActive}\n      >\n        Active\n      </NavLink>\n\n      <NavLink\n        to=\"/completed\"\n        className={classNames('filters__link', {\n          selected: filterBy === Status.COMPLETED,\n        })}\n        onClick={handleShowCompleted}\n      >\n        Completed\n      </NavLink>\n    </nav>\n  );\n};\n","import React from 'react';\nimport { Todo } from '../../types/Todo';\n\ntype Props = {\n  todos: Todo[],\n  onDeleteCompletedTodos: () => void,\n};\n\nexport const DeleteCompletedButton: React.FC<Props> = ({\n  todos,\n  onDeleteCompletedTodos,\n}) => {\n  const completedTodos = todos.filter(todo => todo.completed).length;\n\n  return (\n    <button\n      type=\"button\"\n      className=\"todoapp__clear-completed\"\n      {...(completedTodos ? ({\n        onClick: onDeleteCompletedTodos,\n      }) : (\n        { disabled: true }\n      ))}\n      style={{\n        opacity: completedTodos ? 1 : 0,\n        cursor: completedTodos ? 'pointer' : 'auto',\n      }}\n    >\n      Clear completed\n    </button>\n  );\n};\n","import React from 'react';\nimport { Status } from '../../types/Status';\nimport { Todo } from '../../types/Todo';\nimport { TodoCount } from '../TodoCount';\nimport { TodosFilter } from '../TodosFilter';\nimport { DeleteCompletedButton } from '../DeleteCompletedButton';\n\ntype Props = {\n  todos: Todo[],\n  filterBy: Status,\n  onChangeFilter: (filterBy: Status) => void,\n  onDeleteCompletedTodos: () => void,\n};\n\nexport const Footer: React.FC<Props> = ({\n  todos,\n  filterBy,\n  onChangeFilter,\n  onDeleteCompletedTodos,\n}) => {\n  return (\n    <footer className=\"todoapp__footer\">\n      <TodoCount todos={todos} />\n\n      <TodosFilter\n        filterBy={filterBy}\n        onChangeFilter={onChangeFilter}\n      />\n\n      <DeleteCompletedButton\n        todos={todos}\n        onDeleteCompletedTodos={onDeleteCompletedTodos}\n      />\n    </footer>\n  );\n};\n","import React, { useState, useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { Todo } from '../../types/Todo';\n\ntype Props = {\n  todo: Todo,\n  onUpdateTodo: (id: number, parameter: Partial<Todo>) => void,\n  onDeleteTodo: (id: number) => void,\n};\n\nexport const TodoItem: React.FC<Props> = ({\n  todo,\n  onUpdateTodo,\n  onDeleteTodo,\n}) => {\n  const {\n    id,\n    title,\n    completed,\n  } = todo;\n\n  const [isInEditMode, setIsInEditMode] = useState(false);\n  const [newTitle, setNewTitle] = useState(title);\n  const [expired, setExpired] = useState<number | null>(null);\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, [isInEditMode]);\n\n  const handleEditMode = () => {\n    setIsInEditMode(true);\n  };\n\n  const handleTitleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setNewTitle(event.target.value);\n  };\n\n  const handleTitleUpdate = () => {\n    if (!newTitle.trim()) {\n      onDeleteTodo(id);\n      setIsInEditMode(false);\n\n      return;\n    }\n\n    if (newTitle.trim() === title) {\n      setNewTitle(title.trim());\n      setIsInEditMode(false);\n\n      return;\n    }\n\n    onUpdateTodo(id, { title: newTitle.trim() });\n    setIsInEditMode(false);\n  };\n\n  const handleTitleReset = (event: React.KeyboardEvent) => {\n    if (event.key === 'Escape') {\n      setIsInEditMode(false);\n    }\n  };\n\n  const handleDoubleTouch = (event: React.TouchEvent) => {\n    if (event.touches.length === 1) {\n      if (!expired) {\n        setExpired(event.timeStamp + 400);\n      } else if (event.timeStamp <= expired) {\n        setIsInEditMode(true);\n        setExpired(null);\n      } else {\n        setExpired(event.timeStamp + 400);\n      }\n    }\n  };\n\n  const handleStatusChange = () => {\n    onUpdateTodo(id, { completed: !completed });\n  };\n\n  const handleTodoRemove = () => {\n    onDeleteTodo(id);\n  };\n\n  return (\n    <li\n      className={classNames(\n        'todolist__item',\n        { 'todolist__item--completed': completed },\n        { 'todolist__item--editing': isInEditMode },\n      )}\n      onDoubleClick={handleEditMode}\n      onTouchStart={handleDoubleTouch}\n    >\n      {isInEditMode ? (\n        <form\n          onSubmit={handleTitleUpdate}\n        >\n          <input\n            type=\"text\"\n            name=\"editTodoTitle\"\n            className=\"todolist__edit-field\"\n            value={newTitle}\n            onChange={handleTitleChange}\n            onBlur={handleTitleUpdate}\n            onKeyDown={handleTitleReset}\n            ref={inputRef}\n          />\n        </form>\n      ) : (\n        <div\n          className=\"todolist__view-item\"\n        >\n          <input\n            type=\"checkbox\"\n            id=\"checkbox\"\n            name=\"toggleTodoStatus\"\n            className=\"todolist__toggle-item\"\n            onChange={handleStatusChange}\n            checked={completed}\n          />\n          <label htmlFor=\"checkbox\">{title}</label>\n          <button\n            type=\"button\"\n            className=\"todolist__destroy-item\"\n            aria-label=\"Delete todo item\"\n            data-cy=\"deleteTodo\"\n            onClick={handleTodoRemove}\n          />\n        </div>\n      )}\n    </li>\n  );\n};\n","import React from 'react';\nimport { Todo } from '../../types/Todo';\nimport { TodoItem } from '../TodoItem';\n\ntype Props = {\n  todos: Todo[];\n  onUpdateTodo: (id: number, parameter: Partial<Todo>) => void,\n  onDeleteTodo: (id: number) => void,\n};\n\nexport const TodoList: React.FC<Props> = ({\n  todos,\n  onUpdateTodo,\n  onDeleteTodo,\n}) => {\n  return (\n    <ul className=\"todolist\" data-cy=\"todosList\">\n      {todos.map(todo => (\n        <TodoItem\n          key={todo.id}\n          todo={todo}\n          onUpdateTodo={onUpdateTodo}\n          onDeleteTodo={onDeleteTodo}\n        />\n      ))}\n    </ul>\n  );\n};\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nconst BASE_URL = 'https://mate.academy/students-api';\n\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: unknown = null,\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n\n      return response.json();\n    });\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data?: unknown) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data?: unknown) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import { Todo } from '../types/Todo';\nimport { client } from '../utils/fetchClient';\n\nexport const getTodos = (userId: number) => {\n  return client.get<Todo[]>(`/todos?userId=${userId}`);\n};\n\nexport const addTodo = (todo: Todo): Promise<Todo> => {\n  return client.post('/todos/', todo);\n};\n\nexport const updateTodo = (todoId: number, data: Partial<Todo>) => {\n  return client.patch(`/todos/${todoId}`, data);\n};\n\nexport const deleteTodo = (todoId: number) => {\n  return client.delete(`/todos/${todoId}`);\n};\n","import { User } from '../types/User';\nimport { client } from '../utils/fetchClient';\n\nexport const USER_ID = 7033;\n\nexport const getUser = (userId: number) => {\n  return client.get<User>(`/users/${userId}`);\n};\n","/* eslint-disable jsx-a11y/label-has-associated-control */\nimport React, { useEffect, useState } from 'react';\nimport { Header } from './components/Header';\nimport { Footer } from './components/Footer';\nimport { TodoList } from './components/TodoList';\nimport { Todo } from './types/Todo';\nimport { Status } from './types/Status';\nimport { getVisibleTodos } from './helpers/getVisibleTodos';\nimport {\n  addTodo,\n  getTodos,\n  deleteTodo,\n  updateTodo,\n} from './api/todos';\nimport { USER_ID, getUser } from './api/user';\nimport { User } from './types/User';\n\nexport const App: React.FC = () => {\n  const [todos, setTodos] = useState<Todo[]>([]);\n  const [user, setUser] = useState<User | null>(null);\n  const [title, setTitle] = useState('');\n  const [filterBy, setFilterBy] = useState<Status>(Status.ALL);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  const clearError = () => {\n    setTimeout(() => {\n      setErrorMessage('');\n    }, 3000);\n  };\n\n  const deleteError = () => {\n    setErrorMessage('');\n  };\n\n  useEffect(() => {\n    const loadedTodos = localStorage.getItem('todos');\n\n    if (loadedTodos) {\n      setTodos(JSON.parse(loadedTodos));\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem('todos', JSON.stringify(todos));\n  }, [todos]);\n\n  const getUserName = async () => {\n    const loadedUser = await getUser(USER_ID);\n\n    setUser(loadedUser);\n  };\n\n  const loadTodos = async () => {\n    try {\n      const todosFromServer = await getTodos(USER_ID);\n\n      setTodos(todosFromServer);\n    } catch (error) {\n      setErrorMessage((error as Error).message);\n\n      clearError();\n    }\n  };\n\n  useEffect(() => {\n    getUserName();\n    loadTodos();\n  }, []);\n\n  const visibleTodos = getVisibleTodos(todos, filterBy);\n\n  const handleAddNewTodo = async () => {\n    try {\n      if (title.trim()) {\n        const newTodo = {\n          id: 0,\n          completed: false,\n          userId: USER_ID,\n          title: title.trim(),\n        };\n        const addedTodo = await addTodo(newTodo);\n\n        setTodos((prevTodos: Todo[]) => [...prevTodos, addedTodo]);\n      }\n    } catch {\n      setErrorMessage('Unable to add a todo');\n\n      clearError();\n    } finally {\n      setTitle('');\n    }\n  };\n\n  const handleUpdateTodo = async (\n    todoId: number,\n    parameterToUpdate: Partial<Todo>,\n  ) => {\n    try {\n      await updateTodo(todoId, parameterToUpdate);\n\n      setTodos((prevTodos: Todo[]) => prevTodos.map((todo) => {\n        if (todo.id === todoId) {\n          return { ...todo, ...parameterToUpdate };\n        }\n\n        return todo;\n      }));\n    } catch {\n      setErrorMessage('Unable to update a todo');\n\n      clearError();\n    }\n  };\n\n  const isAllCompleted = todos.every((todo: Todo) => todo.completed);\n\n  const handleToggleAll = async () => {\n    try {\n      if (isAllCompleted) {\n        todos.forEach(todo => (\n          handleUpdateTodo(todo.id, { completed: false })\n        ));\n      } else {\n        const activeTodos = todos.filter(todo => !todo.completed);\n\n        activeTodos.forEach(todo => (\n          handleUpdateTodo(todo.id, { completed: true })\n        ));\n      }\n    } catch {\n      setErrorMessage('Unable to update a todo');\n\n      clearError();\n    }\n  };\n\n  const handleRemoveTodo = async (todoId: number) => {\n    try {\n      await deleteTodo(todoId);\n      setTodos((prevTodos: Todo[]) => prevTodos\n        .filter(todo => todo.id !== todoId));\n    } catch {\n      setErrorMessage('Unable to delete a todo');\n\n      clearError();\n    }\n  };\n\n  const deleteCompletedTodos = () => {\n    const completedTodoIds = todos\n      .filter((todo: Todo) => todo.completed)\n      .map((todo: Todo) => todo.id);\n\n    completedTodoIds.map((id: number) => deleteTodo(id));\n    setTodos((prevTodos: Todo[]) => prevTodos.filter(todo => !todo.completed));\n  };\n\n  return (\n    <div className=\"todoapp\">\n      <h1 className=\"todoapp__title\">todos</h1>\n      {user ? (\n        <h2 className=\"todoapp__userTitle\">\n          {`Hello, ${user.name}`}\n        </h2>\n      ) : (\n        <h2 className=\"todoapp__userTitle\"> </h2>\n      )}\n      <div className=\"todoapp__content\">\n        <Header\n          title={title}\n          setTitle={setTitle}\n          onSaveNewTodo={handleAddNewTodo}\n        />\n\n        <section className=\"todoapp__main\">\n          {todos.length > 0 && (\n            <>\n              <input\n                type=\"checkbox\"\n                name=\"toggleAll\"\n                id=\"todoapp__toggle-all\"\n                className=\"todoapp__toggle-all\"\n                data-cy=\"toggleAll\"\n                onClick={handleToggleAll}\n              />\n              <label\n                className=\"todoapp__toggle-all-label\"\n                htmlFor=\"todoapp__toggle-all\"\n              >\n                Mark all as complete\n              </label>\n\n              <TodoList\n                todos={visibleTodos}\n                onUpdateTodo={handleUpdateTodo}\n                onDeleteTodo={handleRemoveTodo}\n              />\n            </>\n          )}\n        </section>\n\n        {todos.length > 0 && (\n          <Footer\n            todos={todos}\n            filterBy={filterBy}\n            onChangeFilter={setFilterBy}\n            onDeleteCompletedTodos={deleteCompletedTodos}\n          />\n        )}\n      </div>\n      <div\n        className=\"error\"\n        hidden={!errorMessage}\n      >\n        <button\n          type=\"button\"\n          className=\"error__delete\"\n          aria-label=\"Delete error-button\"\n          onClick={deleteError}\n        />\n        {errorMessage}\n      </div>\n    </div>\n  );\n};\n","import { Status } from '../types/Status';\nimport { Todo } from '../types/Todo';\n\nexport const getVisibleTodos = (todos: Todo[], currentFilter: string) => {\n  let visibleTodos = todos;\n\n  if (currentFilter !== Status.ALL) {\n    visibleTodos = todos.filter(({ completed }) => {\n      switch (currentFilter) {\n        case Status.ACTIVE:\n          return !completed;\n        case Status.COMPLETED:\n          return completed;\n        default:\n          throw new Error('Unable to filter');\n      }\n    });\n  }\n\n  return visibleTodos;\n};\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport { HashRouter } from 'react-router-dom';\nimport { App } from './App';\nimport './styles/main.scss';\n\ncreateRoot(document.getElementById('root') as HTMLDivElement)\n  .render(\n    <HashRouter>\n      <App />\n    </HashRouter>,\n  );\n"],"sourceRoot":""}