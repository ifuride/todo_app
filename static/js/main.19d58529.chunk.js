(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){"use strict";n.r(e);var o,c=n(0),r=n(16),a=n(10),i=n(8),s=n(6),l=n(2),u=n.n(l),d=n(4),p=n(3),f=n(1),j=function(t){var e=t.title,n=t.setTitle,o=t.onSaveNewTodo,c=function(t){t.preventDefault(),o()};return Object(f.jsx)("header",{className:"todoapp__header",children:Object(f.jsx)("form",{action:"",onSubmit:c,onBlur:c,children:Object(f.jsx)("input",{type:"text",name:"newTodoTitle","data-cy":"createTodo",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:e,onChange:function(t){n(t.target.value)}})})})},b=function(t){var e=t.todos.filter((function(t){return!t.completed})).length;return Object(f.jsx)("span",{className:"todoapp__todo-count","data-cy":"todosCounter",children:"".concat(e," items left")})},m=n(9),h=n.n(m);!function(t){t.ALL="all",t.ACTIVE="active",t.COMPLETED="completed"}(o||(o={}));var O=function(t){var e=t.filterBy,n=t.onChangeFilter;return Object(f.jsxs)("nav",{className:"filters","data-cy":"todosFilter",children:[Object(f.jsx)(a.b,{to:"/",className:h()("filters__link",{selected:e===o.ALL}),onClick:function(){n(o.ALL)},children:"All"}),Object(f.jsx)(a.b,{to:"/active",className:h()("filters__link",{selected:e===o.ACTIVE}),onClick:function(){n(o.ACTIVE)},children:"Active"}),Object(f.jsx)(a.b,{to:"/completed",className:h()("filters__link",{selected:e===o.COMPLETED}),onClick:function(){n(o.COMPLETED)},children:"Completed"})]})},v=function(t){var e=t.todos,n=t.onDeleteCompletedTodos,o=e.filter((function(t){return t.completed})).length;return Object(f.jsx)("button",Object(i.a)(Object(i.a)({type:"button",className:"todoapp__clear-completed"},o?{onClick:n}:{disabled:!0}),{},{style:{opacity:o?1:0,cursor:o?"pointer":"auto"},children:"Clear completed"}))},x=function(t){var e=t.todos,n=t.filterBy,o=t.onChangeFilter,c=t.onDeleteCompletedTodos;return Object(f.jsxs)("footer",{className:"todoapp__footer",children:[Object(f.jsx)(b,{todos:e}),Object(f.jsx)(O,{filterBy:n,onChangeFilter:o}),Object(f.jsx)(v,{todos:e,onDeleteCompletedTodos:c})]})},_=function(t){var e=t.todo,n=t.onUpdateTodo,o=t.onDeleteTodo,r=e.id,a=e.title,i=e.completed,s=Object(c.useState)(!1),l=Object(p.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(a),b=Object(p.a)(j,2),m=b[0],O=b[1],v=Object(c.useState)(null),x=Object(p.a)(v,2),_=x[0],T=x[1],g=Object(c.useRef)(null);Object(c.useEffect)((function(){g.current&&g.current.focus()}),[u]);var y=function(){return m.trim()?m.trim()===a?(O(a.trim()),void d(!1)):(n(r,{title:m.trim()}),void d(!1)):(o(r),void d(!1))};return Object(f.jsx)("li",{className:h()("todolist__item",{"todolist__item--completed":i},{"todolist__item--editing":u}),onDoubleClick:function(){d(!0)},onTouchStart:function(t){1===t.touches.length&&(_&&t.timeStamp<=_?(d(!0),T(null)):T(t.timeStamp+400))},children:u?Object(f.jsx)("form",{onSubmit:y,children:Object(f.jsx)("input",{type:"text",name:"editTodoTitle",className:"todolist__edit-field",value:m,onChange:function(t){O(t.target.value)},onBlur:y,onKeyDown:function(t){"Escape"===t.key&&d(!1)},ref:g})}):Object(f.jsxs)("div",{className:"todolist__view-item",children:[Object(f.jsx)("input",{type:"checkbox",id:"checkbox",name:"toggleTodoStatus",className:"todolist__toggle-item",onChange:function(){n(r,{completed:!i})},checked:i}),Object(f.jsx)("label",{htmlFor:"checkbox",children:a}),Object(f.jsx)("button",{type:"button",className:"todolist__destroy-item","aria-label":"Delete todo item","data-cy":"deleteTodo",onClick:function(){o(r)}})]})})},T=function(t){var e=t.todos,n=t.onUpdateTodo,o=t.onDeleteTodo;return Object(f.jsx)("ul",{className:"todolist","data-cy":"todosList",children:e.map((function(t){return Object(f.jsx)(_,{todo:t,onUpdateTodo:n,onDeleteTodo:o},t.id)}))})},g="https://mate.academy/students-api";function y(t){return new Promise((function(e){setTimeout(e,t)}))}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:e};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),y(300).then((function(){return fetch(g+t,o)})).then((function(t){if(!t.ok)throw new Error;return t.json()}))}var C=function(t){return k(t)},N=function(t,e){return k(t,"POST",e)},w=function(t,e){return k(t,"PATCH",e)},E=function(t){return k(t,"DELETE")},S=function(t,e){return w("/todos/".concat(t),e)},D=function(t){return E("/todos/".concat(t))},L=7033,A=function(){var t=Object(c.useState)([]),e=Object(p.a)(t,2),n=e[0],r=e[1],a=Object(c.useState)(null),l=Object(p.a)(a,2),b=l[0],m=l[1],h=Object(c.useState)(""),O=Object(p.a)(h,2),v=O[0],_=O[1],g=Object(c.useState)(o.ALL),y=Object(p.a)(g,2),k=y[0],w=y[1],E=Object(c.useState)(""),A=Object(p.a)(E,2),U=A[0],F=A[1],I=function(){setTimeout((function(){F("")}),3e3)};Object(c.useEffect)((function(){var t=localStorage.getItem("todos");t&&r(JSON.parse(t))}),[]),Object(c.useEffect)((function(){localStorage.setItem("todos",JSON.stringify(n))}),[n]);var B=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("/users/".concat(L));case 2:e=t.sent,m(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C("/todos?userId=".concat(L));case 3:e=t.sent,r(e),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),F(t.t0.message),I();case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){B(),P()}),[]);var J=function(t,e){var n=t;return e!==o.ALL&&(n=t.filter((function(t){var n=t.completed;switch(e){case o.ACTIVE:return!n;case o.COMPLETED:return n;default:throw new Error("Unable to filter")}}))),n}(n,k),M=function(){var t=Object(d.a)(u.a.mark((function t(){var e,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!v.trim()){t.next=7;break}return e={id:0,completed:!1,userId:L,title:v.trim()},t.next=5,N("/todos/",e);case 5:n=t.sent,r((function(t){return[].concat(Object(s.a)(t),[n])}));case 7:t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),F("Unable to add a todo"),I();case 13:return t.prev=13,_(""),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,9,13,16]])})));return function(){return t.apply(this,arguments)}}(),V=function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e,n);case 3:r((function(t){return t.map((function(t){return t.id===e?Object(i.a)(Object(i.a)({},t),n):t}))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),F("Unable to update a todo"),I();case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),H=n.every((function(t){return t.completed})),R=function(){var t=Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{H?n.forEach((function(t){return V(t.id,{completed:!1})})):n.filter((function(t){return!t.completed})).forEach((function(t){return V(t.id,{completed:!0})}))}catch(e){F("Unable to update a todo"),I()}case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=Object(d.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D(e);case 3:r((function(t){return t.filter((function(t){return t.id!==e}))})),t.next=10;break;case 6:t.prev=6,t.t0=t.catch(0),F("Unable to delete a todo"),I();case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"todoapp",children:[Object(f.jsx)("h1",{className:"todoapp__title",children:"todos"}),b?Object(f.jsx)("h2",{className:"todoapp__userTitle",children:"Hello, ".concat(b.name)}):Object(f.jsx)("h2",{className:"todoapp__userTitle",children:" "}),Object(f.jsxs)("div",{className:"todoapp__content",children:[Object(f.jsx)(j,{title:v,setTitle:_,onSaveNewTodo:M}),Object(f.jsx)("section",{className:"todoapp__main",children:n.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{type:"checkbox",name:"toggleAll",id:"todoapp__toggle-all",className:"todoapp__toggle-all","data-cy":"toggleAll",onClick:R}),Object(f.jsx)("label",{className:"todoapp__toggle-all-label",htmlFor:"todoapp__toggle-all",children:"Mark all as complete"}),Object(f.jsx)(T,{todos:J,onUpdateTodo:V,onDeleteTodo:G})]})}),n.length>0&&Object(f.jsx)(x,{todos:n,filterBy:k,onChangeFilter:w,onDeleteCompletedTodos:function(){n.filter((function(t){return t.completed})).map((function(t){return t.id})).map((function(t){return D(t)})),r((function(t){return t.filter((function(t){return!t.completed}))}))}})]}),Object(f.jsxs)("div",{className:"error",hidden:!U,children:[Object(f.jsx)("button",{type:"button",className:"error__delete","aria-label":"Delete error-button",onClick:function(){F("")}}),U]})]})};n(27);Object(r.createRoot)(document.getElementById("root")).render(Object(f.jsx)(a.a,{children:Object(f.jsx)(A,{})}))}},[[28,1,2]]]);
//# sourceMappingURL=main.19d58529.chunk.js.map